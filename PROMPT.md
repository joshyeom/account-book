# PRD: 딸깍 가계부 (AI Account Book)

## 1. 개요

### 1.1 프로젝트 배경

기존 가계부 앱들은 설정이 복잡하고 매일 수동으로 입력해야 하는 번거로움이 있다. 퇴근 후 녹초가 된 현대인들에게 가계부 작성은 또 하나의 부담이 된다. 이 프로젝트는 **"딸깍" 한 번**으로 가계부가 자동 정리되는 경험을 제공하여, 가계부 작성의 진입 장벽을 낮추는 것을 목표로 한다.

### 1.2 프로젝트 목표

- **핵심 가치**: 스크린샷 한 장으로 지출/수입이 자동 분석되고 분류되는 경험
- **타겟 사용자**: 20~40대 바쁜 직장인
- **성공 지표**: 개발자 본인이 매일 부담 없이 사용하며 "와우 포인트"를 느끼는 것

### 1.3 기술 스택

- **Frontend**: Next.js 14 (App Router) + TypeScript + TailwindCSS
- **UI**: shadcn/ui (New York 스타일, 다크모드 우선)
- **Backend**: Supabase (Auth + Database)
- **AI**: OpenAI GPT-4 Vision

---

## 2. 타겟 사용자

### 2.1 페르소나

- **이름**: 바쁜 직장인 김씨
- **연령**: 28세
- **직업**: 회사원
- **특징**:
  - 퇴근 후 녹초가 되어 가계부 쓸 여력이 없음
  - 가계부의 필요성은 느끼지만 복잡한 앱은 포기
  - 스마트폰 사용에 익숙하며 간편함을 추구

### 2.2 사용자 니즈

- 복잡한 설정 없이 바로 시작하고 싶다
- 지출 발생 시 빠르게 기록하고 싶다
- 한눈에 내 소비 패턴을 파악하고 싶다

---

## 3. 핵심 기능

### 3.1 Phase 1 (MVP) - 1차 출시

#### 3.1.1 스크린샷 기반 AI 분석

| 항목              | 설명                                                              |
| ----------------- | ----------------------------------------------------------------- |
| **기능**          | 스크린샷 업로드 시 AI가 자동으로 분석                             |
| **입력 소스**     | 은행 앱, 카드사 앱, 간편결제 앱(토스, 카카오페이 등), 문자 메시지 |
| **분석 항목**     | 거래 유형(입금/출금), 금액, 거래처, 날짜                          |
| **카테고리 매칭** | 거래처명을 기반으로 AI가 자동 카테고리 분류 (예: 스타벅스 → 카페) |

#### 3.1.2 수입/지출 관리

| 항목          | 설명                           |
| ------------- | ------------------------------ |
| **거래 유형** | 입금(수입), 출금(지출) 구분    |
| **필수 정보** | 거래처명, 금액, 날짜, 카테고리 |
| **수정 기능** | AI 분석 결과 수동 수정 가능    |

#### 3.1.3 카테고리 시스템

기본 카테고리 (8개):
| 카테고리 | 아이콘 | 색상 |
|----------|--------|------|
| 식비 | Utensils | Red |
| 교통 | Car | Orange |
| 카페 | Coffee | Brown |
| 쇼핑 | ShoppingBag | Purple |
| 여가 | Film | Blue |
| 건강 | Heart | Green |
| 주거 | Home | Cyan |
| 공과금 | Zap | Yellow |

- AI가 새로운 카테고리 제안 가능
- 사용자 커스텀 카테고리 추가 가능

#### 3.1.4 통계 시각화

| 항목          | 설명                              |
| ------------- | --------------------------------- |
| **차트 유형** | 도넛/원형 차트                    |
| **기간 단위** | 일별, 주별, 월별, 연별            |
| **표시 정보** | 카테고리별 지출/수입 비율 및 금액 |

#### 3.1.5 인증

- Google OAuth 로그인

### 3.2 Phase 2 - 2차 개선

#### 3.2.1 정기 거래 관리

| 항목          | 설명                                   |
| ------------- | -------------------------------------- |
| **정기 지출** | 넷플릭스, 통신비, 월세, 구독 서비스 등 |
| **정기 수입** | 월급, 용돈 등                          |
| **알림**      | 정기 거래 예정일 알림                  |

#### 3.2.2 푸시 알림 연동 (Native App 전환 필요)

| 항목     | 설명                                |
| -------- | ----------------------------------- |
| **기능** | 결제 알림 수신 시 자동으로 AI 분석  |
| **대상** | 은행/카드사 푸시 알림               |
| **제약** | 웹앱에서는 제한적, 네이티브 앱 필요 |

---

## 4. 사용자 플로우

### 4.1 최초 사용

```
1. 앱 접속
2. Google/Kakao 로그인
3. 메인 대시보드 진입
4. 첫 스크린샷 업로드 유도
```

### 4.2 일상 사용 (핵심 플로우)

```
1. 결제 발생
2. 결제 내역 스크린샷 촬영
3. 앱에서 스크린샷 업로드 (딸깍!)
4. AI 자동 분석 및 카테고리 분류
5. 결과 확인 (필요시 수정)
6. 저장 완료
```

### 4.3 통계 확인

```
1. 통계 탭 진입
2. 기간 선택 (일/주/월/년)
3. 카테고리별 지출/수입 차트 확인
4. 상세 내역 확인
```

---

## 5. 화면 구성

### 5.1 메인 대시보드

- 이번 달 총 지출/수입 요약
- 최근 거래 내역 리스트
- 빠른 스크린샷 업로드 버튼 (FAB)

### 5.2 스크린샷 업로드

- 갤러리에서 이미지 선택
- 카메라로 직접 촬영
- AI 분석 로딩 상태 표시
- 분석 결과 미리보기 및 수정

### 5.3 거래 내역

- 기간별 필터링
- 카테고리별 필터링
- 수입/지출 토글
- 개별 항목 수정/삭제

### 5.4 통계

- 도넛 차트 (카테고리별 비율)
- 기간 선택 탭 (일/주/월/년)
- 카테고리별 상세 금액 리스트

### 5.5 설정

- 프로필 정보
- 카테고리 관리
- 정기 거래 관리 (Phase 2)
- 로그아웃

---

## 6. 디자인 가이드라인

### 6.1 스타일

- **UI 라이브러리**: shadcn/ui (New York 스타일)
- **테마**: 다크모드 우선, 라이트모드 지원
- **분위기**: 미니멀, 클린

### 6.2 컬러 팔레트

```
Primary: shadcn default
Background (Dark): hsl(0, 0%, 3.9%)
Background (Light): hsl(0, 0%, 100%)
카테고리별 색상: schema.sql 참조
```

### 6.3 타이포그래피

- 시스템 폰트 사용
- 한글 가독성 우선

---

## 7. 데이터 모델

### 7.1 Categories

```sql
- id: UUID (PK)
- user_id: UUID (FK, nullable for defaults)
- name: TEXT
- icon: TEXT (Lucide icon name)
- color: TEXT (HSL)
- is_default: BOOLEAN
- created_at: TIMESTAMP
```

### 7.2 Expenses (Transactions로 확장 예정)

```sql
- id: UUID (PK)
- user_id: UUID (FK)
- category_id: UUID (FK)
- name: TEXT (거래처명)
- amount: INTEGER (양수: 수입, 음수: 지출 또는 type 필드 추가)
- date: DATE
- receipt_url: TEXT (스크린샷 URL)
- ai_processed: BOOLEAN
- created_at: TIMESTAMP
```

### 7.3 Recurring Transactions (Phase 2)

```sql
- id: UUID (PK)
- user_id: UUID (FK)
- category_id: UUID (FK)
- name: TEXT
- amount: INTEGER
- type: TEXT (income/expense)
- frequency: TEXT (monthly/weekly/yearly)
- next_date: DATE
- created_at: TIMESTAMP
```

---

## 8. API 설계

### 8.1 AI 분석 API

```
POST /api/ai/analyze-receipt
Request: { image: base64 }
Response: {
  name: string,        // 거래처명
  amount: number,      // 금액
  date: string,        // 날짜 (YYYY-MM-DD)
  type: 'income' | 'expense',  // 입금/출금
  category: string,    // 매칭된 카테고리명
  isNewCategory: boolean,
  suggestedIcon?: string,
  suggestedColor?: string
}
```

### 8.2 거래 내역 API

```
GET /api/transactions
POST /api/transactions
PUT /api/transactions/:id
DELETE /api/transactions/:id
```

### 8.3 통계 API

```
GET /api/statistics?period=month&date=2024-01
Response: {
  totalIncome: number,
  totalExpense: number,
  byCategory: [{ category, amount, percentage }]
}
```

---

## 9. 기술적 고려사항

### 9.1 AI 분석 정확도

- 다양한 은행/카드사 앱 포맷 대응 필요
- 입금/출금 구분 정확도 확보
- 거래처명 → 카테고리 매핑 로직 개선

### 9.2 성능

- 이미지 압축 후 업로드
- AI 분석 중 로딩 UX 최적화
- 통계 쿼리 최적화 (인덱스 활용)

### 9.3 보안

- RLS(Row Level Security) 적용
- 이미지 URL 보안 (Signed URL 사용)
- API 인증 미들웨어

### 9.4 웹앱 제약

- 푸시 알림 연동은 Service Worker로 제한적 가능
- 백그라운드 알림 읽기는 네이티브 앱 필요

---

## 10. 출시 계획

### 10.1 Phase 1 (MVP)

- 스크린샷 AI 분석
- 수입/지출 관리
- 카테고리 시스템
- 통계 시각화 (도넛 차트)
- 소셜 로그인

### 10.2 Phase 2

- 정기 거래 관리
- 통계 고도화
- UX 개선 (UT 피드백 반영)

### 10.3 Phase 3 (선택)

- 네이티브 앱 전환 (Capacitor or React Native)
- 푸시 알림 자동 분석

---

## 11. 성공 지표

### 11.1 정성적 지표

- 개발자 본인이 매일 사용
- "딸깍" 경험의 와우 포인트 달성
- 설정 없이 바로 사용 가능

### 11.2 정량적 지표 (UT 단계)

- 10명 지인 대상 사용성 테스트
- 평균 일일 사용 횟수
- AI 분석 정확도 (수동 수정 비율)

---

## 12. 부록

### 12.1 경쟁 앱 분석

| 앱          | 장점        | 단점                      |
| ----------- | ----------- | ------------------------- |
| 뱅크샐러드  | 자동 연동   | 설정 복잡, 많은 권한 요구 |
| 토스        | 자동 분류   | 토스 계좌 필수            |
| 가계부 앱들 | 다양한 기능 | 수동 입력 필요, UI 복잡   |

### 12.2 차별화 포인트

- **설정 Zero**: 로그인 후 바로 사용
- **입력 간소화**: 스크린샷 한 장으로 끝
- **AI 자동화**: 카테고리 자동 분류
- **미니멀 UI**: 필수 기능만 제공

---

_문서 버전: 1.0_
_최종 수정일: 2025-01-14_
_작성자: 개발자_
