# PRD: AI 가계부 v2.0

## 문서 정보

| 항목        | 내용            |
| ----------- | --------------- |
| 버전        | 2.0             |
| 작성일      | 2026-01-24      |
| 상태        | Draft           |
| 대상 사용자 | 자산관리 초보자 |

---

## 1. 제품 개요

### 1.1 제품 비전

**"스크린샷 한 장으로 시작하는 똑똑한 가계부"**

자산관리를 처음 시작하는 사용자가 복잡한 설정 없이 스크린샷만으로 지출/수입을 관리하고, 월 예산 대비 사용 현황을 한눈에 파악할 수 있는 심플한 가계부 앱.

### 1.2 핵심 가치

| 가치       | 설명                                     |
| ---------- | ---------------------------------------- |
| **간편함** | 스크린샷 업로드만으로 자동 입력          |
| **명확함** | 월 예산 대비 남은 금액을 직관적으로 표시 |
| **단순함** | 자산관리 초보자를 위한 필수 기능만 제공  |

### 1.3 대상 사용자

- 자산관리를 처음 시작하는 2030 세대
- 복잡한 가계부 앱에 지쳐 포기한 경험이 있는 사용자
- 스마트폰 뱅킹/카드앱 스크린샷으로 간편하게 기록하고 싶은 사용자

---

## 2. 사용자 문제 및 해결책

### 2.1 문제 정의

| 문제                             | 현재 상태              | 해결책                         |
| -------------------------------- | ---------------------- | ------------------------------ |
| 카메라 촬영 버튼이 불필요함      | 카메라/갤러리 2개 버튼 | 갤러리 선택 버튼만 유지        |
| 예산 대비 지출 현황을 알 수 없음 | 지출 합계만 표시       | 월 예산 설정 및 잔여 예산 표시 |
| 처음 시작할 때 기준점이 없음     | 바로 지출 입력 시작    | 온보딩에서 월 예산 설정        |

### 2.2 비목표 (Non-Goals)

다음 기능은 **자산관리 초보자**를 위해 의도적으로 제외:

- 총 자산/부채 관리
- 여러 계좌 연동
- 복잡한 예산 카테고리별 분배
- 투자 포트폴리오 추적
- 정기 결제/구독 관리

---

## 3. 기능 명세

### 3.1 온보딩 플로우 (신규)

#### 3.1.1 월 예산 설정 화면

**화면 구성:**

```
┌─────────────────────────────────┐
│                                 │
│     💰 이번 달 예산을 설정해주세요   │
│                                 │
│  ┌─────────────────────────┐    │
│  │    ₩ 1,000,000         │    │
│  └─────────────────────────┘    │
│                                 │
│  빠른 선택:                      │
│  ┌───┐ ┌───┐ ┌───┐ ┌───┐       │
│  │50만│ │100만│ │150만│ │200만│   │
│  └───┘ └───┘ └───┘ └───┘       │
│                                 │
│  💡 매달 1일에 예산이 초기화됩니다   │
│                                 │
│  ┌─────────────────────────┐    │
│  │        시작하기          │    │
│  └─────────────────────────┘    │
│                                 │
│        나중에 설정하기 →          │
└─────────────────────────────────┘
```

**기능 요구사항:**

| ID     | 요구사항                                   | 우선순위 |
| ------ | ------------------------------------------ | -------- |
| ONB-01 | 숫자 키패드로 직접 입력 가능               | P0       |
| ONB-02 | 빠른 선택 버튼 (50만, 100만, 150만, 200만) | P1       |
| ONB-03 | "나중에 설정하기" 선택 시 홈으로 이동      | P0       |
| ONB-04 | 예산 미설정 시 홈에서 설정 유도 배너 표시  | P1       |

### 3.2 홈 화면 개선

#### 3.2.1 예산 현황 카드

**화면 구성:**

```
┌─────────────────────────────────┐
│  1월 예산                        │
│  ━━━━━━━━━━━━━━━━━━ 70%         │
│                                 │
│  ₩700,000 / ₩1,000,000          │
│  남은 예산: ₩300,000             │
│                                 │
│  📊 하루 평균 ₩43,000 사용 가능   │
└─────────────────────────────────┘
```

**기능 요구사항:**

| ID     | 요구사항                                       | 우선순위 |
| ------ | ---------------------------------------------- | -------- |
| HOM-01 | 월 예산 대비 지출 비율을 프로그레스 바로 표시  | P0       |
| HOM-02 | 남은 예산 금액 표시                            | P0       |
| HOM-03 | 남은 일수 기준 하루 사용 가능 금액 계산        | P1       |
| HOM-04 | 예산 초과 시 빨간색으로 경고 표시              | P0       |
| HOM-05 | 예산 미설정 시 "예산을 설정해주세요" 버튼 표시 | P0       |

### 3.3 스크린샷 업로드 개선

#### 3.3.1 단일 버튼 UI

**Before (현재):**

```
┌─────────────┐  ┌─────────────┐
│  📷 카메라   │  │  🖼 갤러리   │
│    촬영     │  │    선택     │
└─────────────┘  └─────────────┘
```

**After (개선):**

```
┌─────────────────────────────────┐
│                                 │
│         🖼️                      │
│     스크린샷 업로드              │
│                                 │
│  결제 내역이나 거래 내역         │
│  스크린샷을 선택해주세요          │
│                                 │
└─────────────────────────────────┘
```

**기능 요구사항:**

| ID     | 요구사항                            | 우선순위 |
| ------ | ----------------------------------- | -------- |
| UPL-01 | 카메라 촬영 버튼 제거               | P0       |
| UPL-02 | 갤러리 선택 버튼만 유지 (크게 표시) | P0       |
| UPL-03 | 드래그 앤 드롭 지원 (웹)            | P2       |

### 3.4 설정 페이지

#### 3.4.1 예산 관리

**화면 구성:**

```
┌─────────────────────────────────┐
│  💰 월 예산 설정                 │
│  ─────────────────────────────  │
│  현재 예산: ₩1,000,000          │
│                           [수정] │
│                                 │
│  📅 예산 초기화일: 매월 1일       │
│                           [수정] │
└─────────────────────────────────┘
```

**기능 요구사항:**

| ID     | 요구사항                           | 우선순위 |
| ------ | ---------------------------------- | -------- |
| SET-01 | 월 예산 수정 기능                  | P0       |
| SET-02 | 예산 초기화일 변경 (1일 ~ 28일)    | P2       |
| SET-03 | 예산 변경 히스토리는 저장하지 않음 | -        |

---

## 4. 데이터 모델

### 4.1 신규 테이블: user_settings

```sql
CREATE TABLE user_settings (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL UNIQUE REFERENCES auth.users(id) ON DELETE CASCADE,
  monthly_budget INTEGER DEFAULT NULL,
  budget_reset_day INTEGER DEFAULT 1 CHECK (budget_reset_day >= 1 AND budget_reset_day <= 28),
  onboarding_completed BOOLEAN DEFAULT false,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW()),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

-- RLS
ALTER TABLE user_settings ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view their own settings"
  ON user_settings FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can insert their own settings"
  ON user_settings FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update their own settings"
  ON user_settings FOR UPDATE USING (auth.uid() = user_id);
```

### 4.2 필드 설명

| 필드                 | 타입    | 설명                         |
| -------------------- | ------- | ---------------------------- |
| monthly_budget       | INTEGER | 월 예산 (원 단위, null 허용) |
| budget_reset_day     | INTEGER | 예산 초기화일 (1-28, 기본 1) |
| onboarding_completed | BOOLEAN | 온보딩 완료 여부             |

---

## 5. 사용자 플로우

### 5.1 신규 사용자 플로우

```
┌──────────┐
│  로그인   │
└────┬─────┘
     ▼
    ◇ 온보딩
   ╱완료?╲
  ╱      ╲
FALSE    TRUE
  │        │
  ▼        │
┌──────────┐  │
│ 예산 설정 │  │
│  온보딩  │  │
└────┬─────┘  │
     │        │
     ├────────┘
     ▼
┌──────────┐
│    홈    │
└──────────┘
```

### 5.2 지출 등록 플로우

```
┌──────────┐
│    홈    │
└────┬─────┘
     ▼
┌───────────────┐
│  + 버튼 클릭   │
└────┬──────────┘
     ▼
┌───────────────┐
│ 스크린샷 선택  │ ← 갤러리에서만 선택
└────┬──────────┘
     ▼
┌───────────────┐
│  AI 분석 중   │
└────┬──────────┘
     ▼
┌───────────────┐
│ 결과 확인/수정 │
└────┬──────────┘
     ▼
┌───────────────┐
│     저장      │
└────┬──────────┘
     ▼
┌──────────┐
│   홈     │ ← 예산 현황 업데이트
└──────────┘
```

---

## 6. UI/UX 가이드라인

### 6.1 예산 상태 색상

| 상태 | 색상   | 조건             |
| ---- | ------ | ---------------- |
| 안전 | Green  | 사용률 0-70%     |
| 주의 | Yellow | 사용률 71-90%    |
| 위험 | Orange | 사용률 91-100%   |
| 초과 | Red    | 사용률 100% 초과 |

### 6.2 핵심 UX 원칙

1. **원탭 액션**: 주요 기능은 1-2탭 내 완료
2. **즉각적 피드백**: 예산 변화는 실시간 반영
3. **비판단적 톤**: "초과했습니다" 대신 "예산을 넘었어요"
4. **긍정적 강화**: 예산 내 사용 시 격려 메시지

---

## 7. 마일스톤

### Phase 1: MVP (v2.0)

| 기능                      | 우선순위 | 예상 기간 |
| ------------------------- | -------- | --------- |
| 온보딩 - 월 예산 설정     | P0       | 2일       |
| 홈 - 예산 현황 카드       | P0       | 2일       |
| 업로드 - 카메라 버튼 제거 | P0       | 0.5일     |
| 설정 - 예산 수정          | P0       | 1일       |
| DB 스키마 추가            | P0       | 0.5일     |

**총 예상 기간: 6일**

### Phase 2: 개선 (v2.1)

| 기능                     | 우선순위 |
| ------------------------ | -------- |
| 예산 초기화일 커스텀     | P2       |
| 하루 사용 가능 금액 알림 | P2       |
| 주간 리포트              | P2       |

---

## 8. 성공 지표

| 지표                   | 목표    | 측정 방법                    |
| ---------------------- | ------- | ---------------------------- |
| 온보딩 완료율          | > 80%   | 예산 설정 완료 사용자 비율   |
| 월간 활성 사용자 (MAU) | -       | 월 1회 이상 지출 등록        |
| 평균 등록 지출 건수    | 10건/월 | 사용자당 월평균 지출 등록 수 |

---

## 변경 이력

| 버전 | 날짜       | 변경 내용                                  |
| ---- | ---------- | ------------------------------------------ |
| 2.0  | 2026-01-24 | 초안 작성 - 카메라 제거, 월 예산 기능 추가 |
